\documentclass[12pt, oneside, openany]{book}

\usepackage[left=1.6in,top=1.1in,right=1.1in,bottom=1.5in]{geometry}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{breqn}
\usepackage{color}
\usepackage{caption}
\usepackage{cite}
\usepackage{float}
\usepackage{fncychap}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{minted}
\usepackage{rotate}
\usepackage{tikz}
\usepackage[toc]{appendix}
\usepackage{url}

\graphicspath{ {./images/} }
\usemintedstyle{vs}

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
 
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
 
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
\begin{document}

    \frontmatter

\begin{titlepage}
   \begin{center}
       \vspace*{1cm}
 
       \textbf{Assignment 3}
 
       \vspace{0.5cm}
        Practical Introduction to Data Science (SS1-SEM2)
 
       \vspace{1.5cm}
 
       \textbf{Candidate Exam Number: B136325}
 
       \vfill
 
       \vspace{0.8cm}
 
       Department of Informatics\\
       University of Edinburgh\\
       Scotland\\
       9th June 2019
 
   \end{center}
\end{titlepage}
    \pagestyle{plain}

    \tableofcontents

    \mainmatter

    \pagestyle{plain}

\setcounter{equation}{0}
\chapter*{Question 1}
\addcontentsline{toc}{chapter}{Question 1}

\section*{Introduction}
\addcontentsline{toc}{section}{Introduction}
The demonstration will be structured with regard to the CRISP-DM data science project methodology, which describes such projects in terms of the following six sequential phases: Business Understanding, Data Understanding, Data Preparation, Analysis, Evaluation and Deployment. The first of those phases, Business Understanding, will be presented immediately below.

\section*{Business Understanding}
\addcontentsline{toc}{section}{Business Understanding}

The goal of this question will be to demonstrate that weather data can be clustered into two or more groups of 'similar' weather conditions, using a machine learning clustering algorithm. The weather data will contain the results from thirty six weather stations across the UK (as made available online by the Met Office). While the process of retrieving and then cleaning the data will be described within the Data Understanding stage further below, it is worth noting that all of the process described within this answer have been implemented as an R package called \emph{pids-wellbeing-weather}. Moreover, all of the processes have been exported from the package as named functions.

\subsection*{GitHub}
\addcontentsline{toc}{subsection}{GitHub}
The \emph{pids-wellbeing-weather} package has been made available on GitHub, using this student's exam number, b136325, as the GitHub account name. In addition, the package makes use of Packrat dependency management. This mean that the packages contains all of its dependencies. This approach increases the size of the package. Importantly, however, it ensures portability. The package can be cloned from GitHub using the following command: 


\begin{minted}{bash}
git clone https://github.com/b136325/pids.wellbeing.weather.git
\end{minted}

\subsection*{RStudio}
\addcontentsline{toc}{subsection}{RStudio}
Alternatively, the package can be installed into RStudio using the commands below: 

\begin{minted}{R}
install.packages("devtools")
library(devtools)
install_github("b136325/pids.wellbeing.weather")
\end{minted}

\section*{Data understanding}
\addcontentsline{toc}{section}{Data understanding}

\subsection*{Statistical value chain}
\addcontentsline{toc}{subsection}{Statistical value chain}

1. Package directory structure - raw to data

2. Within data (svc) sub-directories

3. sub directory naming

4. Command naming

5. single exported command per file

\subsubsection*{Raw data: weather and well-being}
\addcontentsline{toc}{subsubsection}{Raw data}

This process downloads the required files into the \emph{pids-wellbeing-weather} and stores them within the data-raw/weather and the data-raw/wellbeing directories, respectively. The web address from which the data are downloaded are constructed dynamically using constants defined within `constants-weather-station-names.R' and `contants-wellbeing'. The function associated with this process has been exported from the pids.wellbeing.weather package. When run it returns a list of files that have been downloaded successfully, along with any that have failed, as illustrated in Figure \ref{fig:question_1_001}. The function can be run using the command below:

\begin{minted}{R}
pids.wellbeing.weather::question_1_001_svc_raw_data()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-001-svc-raw-data.R
\end{minted}

\subsubsection*{Technically correct: weather .txt data}
\addcontentsline{toc}{subsubsection}{Technically correct: weather .txt data}

In order to ensure a strong data related 'separation of concerns', such that, no amendments should be made to the data stored within the `data-raw` directory, this process moves the raw weather data from `data-raw` into `data`. In addition, it adds a closing new line character to each file, facilitating subsequent processing. More specifically, the weather data is moved into a directory representing the first stage of the 'technically correct' Statistical Value Chain process, which can be found at `data/weather/stage-010-technically-correct-text`. The function associated with this process has been exported from the package and it can be run using the command below. The function returns a list containing the destination paths of the successfully moved files.

\begin{minted}{R}
pids.wellbeing.weather::question_1_002_svc_tech_weather_txt()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:
\begin{minted}{Bash}
./R/question-1-002-svc-tech-weather-txt.R
\end{minted}

\subsubsection*{Technically correct: weather .dsv data}
\addcontentsline{toc}{subsubsection}{Technically correct: weather .dsv data}

The next stage of technically correct data processing transforms the .txt files into a .dsv white space delimited file format. This processes involves the removal of non column related header items from the .txt files. It also involves ensuring that the all of the files have a standard number of columns, which enables them to be reliably converted into a delimited file format. In addition, invalid data items, such as "---" are converted into a common data strandard, such as "NA". The function associated with this process has been exported from the package and it can be run using the command below. The function returns a list containing the destination paths of the successfully moved files, along with any errors.

\begin{minted}{R}
pids.wellbeing.weather::question_1_003_svc_tech_weather_dsv()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:
\begin{minted}{Bash}
./R/question-1-003-svc-tech-weather-dsv.R
\end{minted}

\subsubsection*{Technically correct: weather data frames}
\addcontentsline{toc}{subsubsection}{Technically correct: weather data frames}

The stage of technically correct data processing transforms the .dsv files into data frames, saved in .Rds formats within the data/weather/stage-012-technically-correct-dataframe. The function associated with this process has been exported from the package and it can be run using the command below. The function returns a list containing the destination paths of the successfully saved files, along with any errors.

\begin{minted}{R}
pids.wellbeing.weather::question_1_004_svc_tech_weather_df()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-004-svc-tech-weather-df.R
\end{minted}

\subsubsection*{Technically correct: weather data frames completet}
\addcontentsline{toc}{subsubsection}{Technically correct: weather data frames complete}

The stage of technically correct data processing transforms the .Rds files from the data/weather/stage-012-technically-correct-dataframe directory. It ensures that the data frames have common lower case column names, along with appropriate data types. The transformed data frames are stored within the `stage-013-technically-correct-complete` directory. The function associated with this process has been exported from the package and it can be run using the command below. The function returns a list containing the destination paths of the successfully saved files, along with any errors.

\begin{minted}{R}
pids.wellbeing.weather::question_1_005_svc_tech_weather_complete()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-005-svc-tech-weather-complete.R
\end{minted}

\subsubsection*{Technically correct: weather single data frame}
\addcontentsline{toc}{subsubsection}{Technically correct: weather single data frame}

The stage of technically correct data processing transforms the .Rds files from the `stage-013-technically-correct-complete` directory into a single data frame, which is stored within `stage-014-technically-complete-single-dataframe`. The function associated with this process has been exported from the package and it can be run using the command below. The function returns the destination path of the successfully saved file, along with any errors.

\begin{minted}{R}
pids.wellbeing.weather::question_1_006_svc_tech_weather_single_df()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-006-svc-tech-weather-single-df.R
\end{minted}

\subsubsection*{Consistently correct}
\addcontentsline{toc}{subsubsection}{Consistently correct}

\begin{table}[h!]
	\centering
	\begin{tabular}{ |l|c|c|c|c| }
		\hline
		Summary Type & Sunshine (hours) & Rain (mm) & Temp max (c) & Temp min (c)\\
		\hline
		\hline
		Mean & 119.119  & 75.032  & 12.816 & 5.998 \\
		Min & 89.526  & 45.803  & 9.496   & 2.734 \\
		Max & 155.310 & 151.117  & 14.968  & 8.386 \\
		SD & 16.196  & 26.958   & 1.343  & 1.194 \\
		\hline
	\end{tabular}
	\caption{Mean, min, max and SD for the weather features (3sf)}
	\label{table:question_1_008_grouped_data_summary_non_scaled}
\end{table}

\begin{minted}{R}
pids.wellbeing.weather::question_1_007_svc_cons_summary()
pids.wellbeing.weather::question_1_008_svc_cons_grouped_data()
pids.wellbeing.weather::question_1_009_svc_cons_grouped_data_summary()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the functions described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-007-svc-cons-summary.R
./R/question-1-008-svc-cons-grouped-data.R
./R/question-1-009-svc-cons-grouped-data-summary.R
\end{minted}

\subsection*{Exploratory data analysis (EDA)}
\addcontentsline{toc}{subsection}{Exploratory data analysis (EDA)}

\subsubsection*{Box and whisker}
\addcontentsline{toc}{subsubsection}{Box and whisker}

\begin{minted}{R}
pids.wellbeing.weather::question_1_010_eda_charts_box_whisker_hours_sun()
pids.wellbeing.weather::question_1_010_eda_charts_box_whisker_hours_rain()
pids.wellbeing.weather::question_1_010_eda_charts_box_whisker_max_temp()
pids.wellbeing.weather::question_1_010_eda_charts_box_whisker_min_temp()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the functions described above can be found at the following address:

\begin{minted}{Bash}
./R/question_1_010_eda_charts_box_whisker_hours_sun.R
./R/question_1_010_eda_charts_box_whisker_hours_rain.R
./R/question_1_010_eda_charts_box_whisker_max_temp.R
./R/question_1_010_eda_charts_box_whisker_min_temp.R
\end{minted}

\subsubsection*{Remove outliers}
\addcontentsline{toc}{subsubsection}{Remove outliers}

\begin{table}[h!]
	\centering
	\begin{tabular}{ |l|c|c|c|c| }
		\hline
		Summary Type & Sunshine (hours) & Rain (mm) & Temp max (c) & Temp min (c)\\
		\hline
		\hline
		Mean & 118.43  & 69.602  & 12.816 & 5.998 \\
		Min & 91.320  & 47.399  & 9.496   & 2.734 \\
		Max & 149.349 & 127.368  & 14.968  & 8.386 \\
		SD & 14.032  & 18.998   & 1.343  & 1.194 \\
		\hline
	\end{tabular}
	\caption{Mean, min, max and SD for the weather features (3sf)}
	\label{table:question_1_008_grouped_data_summary_non_scaled}
\end{table}

\begin{minted}{R}
pids.wellbeing.weather::question_1_011_eda_remove_outliers()
pids.wellbeing.weather::question_1_012_eda_remove_outliers_summary()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the functions described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-011-eda-remove-outliers.R
./R/question-1-012-eda-remove-outliers-summary.R
\end{minted}

\subsubsection*{Weather variables by latitude}
\addcontentsline{toc}{subsubsection}{Weather variables by latitude}

\begin{minted}{R}
pids.wellbeing.weather::question_1_013_eda_charts_latitude()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-013-eda-charts-latitude.R
\end{minted}

\subsubsection*{Weather variables by latitude and longitude}
\addcontentsline{toc}{subsubsection}{Weather variables by latitude and longitude}

\begin{minted}{R}
pids.wellbeing.weather::question_1_014_eda_charts_longitude_latitude_hours_sun()
pids.wellbeing.weather::question_1_015_eda_charts_longitude_latitude_rain()
pids.wellbeing.weather::question_1_016_eda_charts_longitude_latitude_max_temp()
pids.wellbeing.weather::question_1_017_eda_charts_longitude_latitude_min_temp()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the functions described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-014-eda-charts-longitude-latitude-hours-sun.R
./R/question-1-015-eda-charts-longitude-latitude-rain.R
./R/question-1-016-eda-charts-longitude-latitude-max-temp.R
./R/question-1-017-eda-charts-longitude-latitude-min-temp.R
\end{minted}

\subsection*{Cluster tendency}
\addcontentsline{toc}{subsection}{Cluster tendency}

The clustering tendency of the data has been calculated using the Hopkins statistic (H). It assesses the probability that the data contains non random structures. The statistic has been calculated using the \emph{factoextra} dependency. Using the data with outliers removed, the result of H was \textbf{0.352}. 

(1) high score-->uniform distribution-->no cluster

(2)low score-->not uniform distribution-/->(may be not)cluster. 


The function used to generate this statistic can be run using the command below:
\begin{minted}{R}
pids.wellbeing.weather::question_1_018_prep_cluster_tendency()
pids.wellbeing.weather::question_1_018_prep_cluster_tendency(show_chart = TRUE)
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-018-prep-cluster-tendency.R
\end{minted}

\subsection*{VAT}
\addcontentsline{toc}{subsection}{VAT}

\begin{minted}{R}
pids.wellbeing.weather::question_1_019_prep_charts_vat()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-019-prep-charts-vat.R
\end{minted}

\section*{Data preparation}
\addcontentsline{toc}{section}{Data preparation}

\subsection*{ K choice}
\addcontentsline{toc}{subsection}{K choice}

\begin{minted}{R}
pids.wellbeing.weather::question_1_020_prep_k_choice()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-020-prep-k-choice.R
\end{minted}

\subsection*{Algorithm choice}
\addcontentsline{toc}{subsection}{Algorithm choice}

\begin{minted}{R}
pids.wellbeing.weather::question_1_021_prep_algorithm_choice()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-021-prep-algorithm-choice.R
\end{minted}

\subsection*{Linkage choice}
\addcontentsline{toc}{subsection}{Linkage choice}

\begin{minted}{R}
pids.wellbeing.weather::question_1_022_linkage_choice()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the function described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-022-linkage-choice.R
\end{minted}

\section*{Analysis}
\addcontentsline{toc}{section}{Analysis}

\subsection*{Hierarchical}
\addcontentsline{toc}{subsection}{Hierarchical}

\begin{minted}{R}
pids.wellbeing.weather::question_1_023_analysis_hierarchical()
pids.wellbeing.weather::question_1_024_analysis_charts_dendrogram()
pids.wellbeing.weather::question_1_025_analysis_attach_pruned_cluster_values()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the functions described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-023-analysis-hierarchical.R
./R/question-1-024-analysis-charts-dendrogram.R
./R/question-1-025-analysis-attach-pruned-cluster-values.R
\end{minted}

\subsection*{k-means}
\addcontentsline{toc}{subsection}{K-means}

\begin{minted}{R}
pids.wellbeing.weather::question_1_026_analysis_kmeans()
pids.wellbeing.weather::question_1_027_analysis_charts_sum_squares()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the functions described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-026-analysis-kmeans.R
./R/question-1-027-analysis-charts-sum-squares.R
\end{minted}

\section*{Evaluation}
\addcontentsline{toc}{section}{Evaluation}

\subsection*{Hierarchical}
\addcontentsline{toc}{subsection}{Hierarchical}

\begin{minted}{R}
pids.wellbeing.weather::question_1_032_eval_charts_hierarchical_latitude()
pids.wellbeing.weather::question_1_033_eval_charts_hier_latitude_longitude_hours_sun()
pids.wellbeing.weather::question_1_034_eval_charts_hier_latitude_longitude_rain_mm()
pids.wellbeing.weather::question_1_035_eval_charts_hier_latitude_longitude_max_temp()
pids.wellbeing.weather::question_1_036_eval_charts_hier_latitude_longitude_min_temp()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the functions described above can be found at the following address:

\begin{minted}{Bash}
./R/question-1-032-eval-charts-hier-latitude.R
./R/question-1-033-eval-charts-hier-latitude-longitude-hours-sun.R
./R/question-1-034-eval-charts-hier-latitude-longitude-rain-mm.R
./R/question-1-035-eval-charts-hier-latitude-longitude-max-temp.R
./R/question-1-036-eval-charts-hier-latitude-longitude-min-temp.R
\end{minted}

\section*{Deployment}
\addcontentsline{toc}{section}{Deployment}

\setcounter{equation}{0}
\chapter*{Question 2}
\addcontentsline{toc}{chapter}{Question 2}

\section*{Business Understanding}
\addcontentsline{toc}{section}{Business Understanding}

\section*{Data Understanding}
\addcontentsline{toc}{section}{Data Understanding}

\subsection*{Append latitude categories}
\addcontentsline{toc}{subsection}{Append latitude categories}

\begin{minted}{R}
pids.wellbeing.weather::question_2_001_bu_append_latitude_categories()
\end{minted}

Within the \emph{pids.wellbeing.weather} package the functions described above can be found at the following address:

\begin{minted}{Bash}
./R/question-2-001-bu-append-latitude-categories()
\end{minted}

\subsection*{Exploratory data analysis (EDA)}
\addcontentsline{toc}{subsection}{Exploratory data analysis (EDA)}

\subsubsection*{Number of weather stations per latitude category}
\addcontentsline{toc}{subsubsection}{Number of weather stations per latitude category}

\begin{minted}{R}
pids.wellbeing.weather::question_2_002_eda_latitude_category_summary()$nrow
\end{minted}

The function described above can be found within the \emph{pids.wellbeing.weather} package at the following address:

\begin{minted}{Bash}
./R/question-2-002-eda-latitude-category-summary.R
\end{minted}

\subsubsection*{Weather stations per latitude category}
\addcontentsline{toc}{subsubsection}{Weather stations per latitude category}

\begin{minted}{R}
pids.wellbeing.weather::question_2_002_eda_latitude_category_summary()$weather_stations
\end{minted}

The function described above can be found within the \emph{pids.wellbeing.weather} package at the following address:

\begin{minted}{Bash}
./R/question-2-002-eda-latitude-category-summary.R
\end{minted}

\subsubsection*{Mean weather features per latitude category}
\addcontentsline{toc}{subsubsection}{Mean weather features per latitude category}

\begin{minted}{R}
pids.wellbeing.weather::question_2_002_eda_latitude_category_summary()$means
pids.wellbeing.weather::question_2_003_eda_charts_weather_features()
\end{minted}

The function described above can be found within the \emph{pids.wellbeing.weather} package at the following address:

\begin{minted}{Bash}
./R/question-2-002-eda-latitude-category-summary.R
./R/question-2-003-eda-charts-weather-features.R
\end{minted}

\subsubsection*{Latitude category pairwise comparisons}
\addcontentsline{toc}{subsubsection}{Latitude category pairwise comparisons}

\begin{minted}{R}
pids.wellbeing.weather::question_2_004_eda_charts_latitude_category_pairwise()
\end{minted}

The function described above can be found within the \emph{pids.wellbeing.weather} package at the following address:

\begin{minted}{Bash}
./R/question-2-004-eda-charts-latitude_category-pairwise.R
\end{minted}

\subsubsection*{Latitude and longitude per latitude category}
\addcontentsline{toc}{subsubsection}{Latitude and longitude per latitude category}

\begin{minted}{R}
pids.wellbeing.weather::question_2_005_eda_charts_latitude_longitude_hours_sun()
pids.wellbeing.weather::question_2_005_eda_charts_latitude_longitude_rain()
pids.wellbeing.weather::question_2_005_eda_charts_latitude_longitude_temp_max
pids.wellbeing.weather::question_2_005_eda_charts_latitude_longitude_temp_min
\end{minted}

The functions described above can be found within the \emph{pids.wellbeing.weather} package at the following address:

\begin{minted}{Bash}
./R/question-2-005-eda-charts-latitude-longitude.R
\end{minted}

\section*{Data Preparation}
\addcontentsline{toc}{section}{Data Preparation}

\subsubsection*{Training and test data split}
\addcontentsline{toc}{subsubsection}{Training and test data split}

\begin{minted}{R}
pids.wellbeing.weather::question_2_006_prep_split()
\end{minted}

The function described above can be found within the \emph{pids.wellbeing.weather} package at the following address:

\begin{minted}{Bash}
./R/question-2-006-prep-split.R
\end{minted}

\section*{Analysis}
\addcontentsline{toc}{section}{Analysis}

\subsubsection*{K Nearest Neighbours}
\addcontentsline{toc}{subsubsection}{K Nearest Neighbours}


\begin{minted}{R}
pids.wellbeing.weather::question_2_007_analysis_knn()
\end{minted}

The function described above can be found within the \emph{pids.wellbeing.weather} package at the following address:

\begin{minted}{Bash}
./R/question-2-007-analysis-knn.R
\end{minted}

\setcounter{equation}{0}
\chapter*{Question 3}
\addcontentsline{toc}{chapter}{Question 3}

\pagebreak
\bibliography{references} 
\bibliographystyle{ieeetr}

\chapter*{Appendices}
\addcontentsline{toc}{chapter}{Appendices}
\newpage

\section*{A. Raw data output}
\addcontentsline{toc}{section}{Raw data output}
\label{appendix:raw-data-output}

\backmatter
\end{document}
